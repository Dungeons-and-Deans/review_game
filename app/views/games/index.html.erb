<div class="mdl-cell mdl-cell--12-col">
  <h3>Available Game Scenarios</h3>
</div>

<div class="mdl-cell mdl-cell--12-col mdl-grid game-card-container">
<% @games.each do |game| %>
  <div class="mdl-cell mdl-cell--2-col mdl-shadow--4dp game-card">
    <div class="remove-game"><%= link_to '<i class="fa fa-times"></i>'.html_safe, game, method: :delete, data: { confirm: 'Are you sure?' } %></div>
    <span><%= game.name %></span>
    <div class="game-container"><a href="<%= edit_game_path(game) %>"><img class="preview" src="<%= game.maps.first.file_path %>"></a></div>
    <span><%= link_to 'Start New', new_game_session_path(game), html_options = { class: "mdl-button mdl-js-button mdl-button--accent" } %></span>
  </div>
<% end %>
</div>

<div class="mdl-cell mdl-cell--4-col"></div>

<div class="mdl-cell mdl-cell--12-col">
  <h3>Current Games</h3>
</div>

<div class="mdl-cell mdl-cell--2-col"></div>

<table class="mdl-data-table mdl-js-data-table mdl-shadow--2dp mdl-cell mdl-cell--8-col current-games">
  <thead>
    <tr>
      <th class="mdl-data-table__cell--non-numeric">Name</th>
      <th class="mdl-data-table__cell--non-numeric">Player Icon</th>
      <th class="mdl-data-table__cell--non-numeric">Game</th>
      <th>Last Active Date</th>
      <th class="mdl-data-table__cell--non-numeric">Winner</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @games.each do |game| %>
      <% game.game_sessions.each do |game_session| %>
        <tr>
          <td class="mdl-data-table__cell--non-numeric"><%= game_session.name %></td>
          <td><i class="<%= game_session.icon.description %> fa-2x"></i></td>
          <td class="mdl-data-table__cell--non-numeric"><%= game.name %></td>
          <td><%= game_session.updated_at.strftime("%b %e, %Y") %></td>
          <td class="mdl-data-table__cell--non-numeric"><%= Group.find(game_session.winning_group_id).name if game_session.winning_group_id %></td>
          <td><%= link_to 'Play', teacher_gameplay_path(game_session) %></td>
          <td><%= link_to 'Groups', game_session_groups_path(game_session) %></td>
          <td><%= link_to '<i class="fa fa-times"></i>'.html_safe, delete_game_session_path(game_session), method: :delete, data: { confirm: 'Are you sure?' } %></td>
        </tr>
      <% end %>
    <% end %>
  </tbody>
</table>

<div class="mdl-cell mdl-cell--2-col"></div>
